{"ast":null,"code":"'use strict';\n\nvar _ = require('lodash');\nvar jwt = require('jsonwebtoken');\nvar qs = require('querystring');\n\n/**\n * @constructor\n * @param filters\n */\nfunction EventStreamScope(filters) {\n  this.filters = filters || {};\n}\n_.extend(EventStreamScope.prototype, {\n  scope: 'scope:stream:subscribe',\n  payload: function () {\n    var queryArgs = ['path=/2010-04-01/Events'];\n    if (!_.isEmpty(this.filters)) {\n      var queryParams = _.map(this.filters, function (value, key) {\n        return _.join([qs.escape(key), qs.escape(value)], '=');\n      });\n      var filterParams = _.join(queryParams, '&');\n      queryArgs.push(_.join(['appParams', qs.escape(filterParams)], '='));\n    }\n    var queryString = _.join(queryArgs, '&');\n    return _.join([this.scope, queryString], '?');\n  }\n});\n\n/**\n * @constructor\n * @param clientName\n */\nfunction IncomingClientScope(clientName) {\n  this.clientName = clientName;\n}\n_.extend(IncomingClientScope.prototype, {\n  scope: 'scope:client:incoming',\n  payload: function () {\n    var query = _.join(['clientName', qs.escape(this.clientName)], '=');\n    return _.join([this.scope, query], '?');\n  }\n});\n\n/**\n * @constructor\n * @param {object} options - ...\n * @param {string} options.applicationSid - the application sid\n * @param {string} [options.clientName] - the client name\n * @param {object} [options.params] - parameters\n */\nfunction OutgoingClientScope(options) {\n  if (_.isUndefined(options)) {\n    throw new Error('Required parameter \"options\" missing.');\n  }\n  if (_.isUndefined(options.applicationSid)) {\n    throw new Error('Required parameter \"options.applicationSid\" missing.');\n  }\n  options = options || {};\n  this.applicationSid = options.applicationSid;\n  this.clientName = options.clientName;\n  this.params = options.params;\n}\n_.extend(OutgoingClientScope.prototype, {\n  scope: 'scope:client:outgoing',\n  payload: function () {\n    var queryArgs = [_.join(['appSid', qs.escape(this.applicationSid)], '=')];\n    if (_.isString(this.clientName)) {\n      queryArgs.push(_.join(['clientName', qs.escape(this.clientName)], '='));\n    }\n    if (_.isObject(this.params)) {\n      var queryParams = _.map(this.params, function (value, key) {\n        return _.join([qs.escape(key), qs.escape(value)], '=');\n      });\n      var filterParams = _.join(queryParams, '&');\n      queryArgs.push(_.join(['appParams', qs.escape(filterParams)], '='));\n    }\n    var queryString = _.join(queryArgs, '&');\n    return _.join([this.scope, queryString], '?');\n  }\n});\n\n/**\n * @constructor\n * @param options\n */\nfunction ClientCapability(options) {\n  if (_.isUndefined(options)) {\n    throw new Error('Required parameter \"options\" missing.');\n  }\n  if (_.isUndefined(options.accountSid)) {\n    throw new Error('Required parameter \"options.accountSid\" missing.');\n  }\n  if (_.isUndefined(options.authToken)) {\n    throw new Error('Required parameter \"options.authToken\" missing.');\n  }\n  options = options || {};\n  this.accountSid = options.accountSid;\n  this.authToken = options.authToken;\n  this.ttl = options.ttl || 3600;\n  this.scopes = [];\n}\nClientCapability.EventStreamScope = EventStreamScope;\nClientCapability.IncomingClientScope = IncomingClientScope;\nClientCapability.OutgoingClientScope = OutgoingClientScope;\n_.extend(ClientCapability.prototype, {\n  addScope: function (scope) {\n    this.scopes.push(scope);\n  },\n  toJwt: function () {\n    var payload = {\n      scope: _.join(_.map(this.scopes, function (scope) {\n        return scope.payload();\n      }), ' '),\n      iss: this.accountSid,\n      exp: Math.floor(new Date() / 1000) + this.ttl\n    };\n    return jwt.sign(payload, this.authToken);\n  }\n});\nmodule.exports = ClientCapability;","map":{"version":3,"names":["_","require","jwt","qs","EventStreamScope","filters","extend","prototype","scope","payload","queryArgs","isEmpty","queryParams","map","value","key","join","escape","filterParams","push","queryString","IncomingClientScope","clientName","query","OutgoingClientScope","options","isUndefined","Error","applicationSid","params","isString","isObject","ClientCapability","accountSid","authToken","ttl","scopes","addScope","toJwt","iss","exp","Math","floor","Date","sign","module","exports"],"sources":["C:/Users/spoon/Documents/GitHub/SDI/transportes-app/frontend/node_modules/twilio/lib/jwt/ClientCapability.js"],"sourcesContent":["'use strict';\n\nvar _ = require('lodash');\nvar jwt = require('jsonwebtoken');\nvar qs = require('querystring');\n\n/**\n * @constructor\n * @param filters\n */\nfunction EventStreamScope(filters) {\n  this.filters = filters || {};\n}\n\n_.extend(EventStreamScope.prototype, {\n  scope: 'scope:stream:subscribe',\n\n  payload: function() {\n    var queryArgs = ['path=/2010-04-01/Events'];\n\n    if (!_.isEmpty(this.filters)) {\n      var queryParams = _.map(this.filters, function(value, key) {\n        return _.join([qs.escape(key), qs.escape(value)], '=');\n      });\n      var filterParams = _.join(queryParams, '&');\n\n      queryArgs.push(_.join(['appParams', qs.escape(filterParams)], '='));\n    }\n\n    var queryString = _.join(queryArgs, '&');\n    return _.join([this.scope, queryString], '?');\n  }\n});\n\n/**\n * @constructor\n * @param clientName\n */\nfunction IncomingClientScope(clientName) {\n  this.clientName = clientName;\n}\n\n_.extend(IncomingClientScope.prototype, {\n  scope: 'scope:client:incoming',\n\n  payload: function() {\n    var query = _.join(['clientName', qs.escape(this.clientName)], '=');\n    return _.join([this.scope, query], '?');\n  }\n});\n\n/**\n * @constructor\n * @param {object} options - ...\n * @param {string} options.applicationSid - the application sid\n * @param {string} [options.clientName] - the client name\n * @param {object} [options.params] - parameters\n */\nfunction OutgoingClientScope(options) {\n  if (_.isUndefined(options)) {\n    throw new Error('Required parameter \"options\" missing.');\n  }\n  if (_.isUndefined(options.applicationSid)) {\n    throw new Error('Required parameter \"options.applicationSid\" missing.');\n  }\n\n  options = options || {};\n  this.applicationSid = options.applicationSid;\n  this.clientName = options.clientName;\n  this.params = options.params;\n}\n\n_.extend(OutgoingClientScope.prototype, {\n  scope: 'scope:client:outgoing',\n\n  payload: function() {\n    var queryArgs = [_.join(['appSid', qs.escape(this.applicationSid)], '=')];\n\n    if (_.isString(this.clientName)) {\n      queryArgs.push(_.join(['clientName', qs.escape(this.clientName)], '='));\n    }\n\n    if (_.isObject(this.params)) {\n      var queryParams = _.map(this.params, function(value, key) {\n        return _.join([qs.escape(key), qs.escape(value)], '=');\n      });\n      var filterParams = _.join(queryParams, '&');\n\n      queryArgs.push(_.join(['appParams', qs.escape(filterParams)], '='));\n    }\n\n    var queryString = _.join(queryArgs, '&');\n    return _.join([this.scope, queryString], '?');\n  }\n});\n\n/**\n * @constructor\n * @param options\n */\nfunction ClientCapability(options) {\n  if (_.isUndefined(options)) {\n    throw new Error('Required parameter \"options\" missing.');\n  }\n  if (_.isUndefined(options.accountSid)) {\n    throw new Error('Required parameter \"options.accountSid\" missing.');\n  }\n  if (_.isUndefined(options.authToken)) {\n    throw new Error('Required parameter \"options.authToken\" missing.');\n  }\n\n  options = options || {};\n  this.accountSid = options.accountSid;\n  this.authToken = options.authToken;\n  this.ttl = options.ttl || 3600;\n  this.scopes = [];\n}\n\nClientCapability.EventStreamScope = EventStreamScope;\nClientCapability.IncomingClientScope = IncomingClientScope;\nClientCapability.OutgoingClientScope = OutgoingClientScope;\n\n_.extend(ClientCapability.prototype, {\n  addScope: function(scope) {\n    this.scopes.push(scope);\n  },\n\n  toJwt: function() {\n    var payload = {\n      scope: _.join(_.map(this.scopes, function(scope) {\n        return scope.payload();\n      }), ' '),\n      iss: this.accountSid,\n      exp: Math.floor(new Date() / 1000) + this.ttl\n    };\n\n    return jwt.sign(payload, this.authToken);\n  }\n});\n\nmodule.exports = ClientCapability;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}